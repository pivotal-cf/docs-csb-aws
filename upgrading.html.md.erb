---
title: Upgrading Cloud Service Broker for AWS
owner: Cloud Service Broker
---

This topic describes how to upgrade <%= vars.product_full %>.

## <a id="upgrade-to-1-2-0"></a> Upgrading from v1.1.2 to v1.2.0

S3 bucket is no longer in beta and can be used in production.
From this version onwards, plans are no longer provided with the brokerpak.
If you have S3 bucket instances that you want to maintain, you must add previously provided plans
through the tile.
For more information, see [Add previously provided canned plans](reference/aws-s3.html.md.erb#old-plans).

If you instead want to delete all previously created S3 bucket service instances, you must delete
them before upgrading <%= vars.product_short %> to v1.2.0.

To remove the instances from the broker, run:

```console
cf delete-service SERVICE-NAME
```

To remove instances from Cloud Foundry, but retain them in the IaaS, run:

```console
cf purge-service-instance
```
### <a id="custom-plans"></a> Custom plans changes

If you have custom plans already configured, you may need to change the configuration to account for the new `boc_object_ownership` property
which defaults to `BucketOwnerEnforced` and thus disables ACLs. E.g

```json
  {
      "name": "public-read",
      "id": "04317eaa-11ac-4c5f-b77f-eb005fe977fe",
      "description": "Public-read S3 bucket",
      "display_name": "Public Read",
      "acl": "public-read",
  }
```

Should now become

```json
  {
      "name": "public-read",
      "id": "04317eaa-11ac-4c5f-b77f-eb005fe977fe",
      "description": "Public-read S3 bucket",
      "display_name": "Public Read",
      "acl": "public-read",
      "boc_object_ownership": "ObjectWriter"
  }
```

More information on the <code>boc_object_ownership</code> and <code>acl</code>
properties can be found in the [Amazon S3 Bucket](reference/aws-s3.html.md.erb) service offereing documentation.



## <a id="procedure"></a> Upgrade procedure

To upgrade the <%= vars.product_short %> to a later version:

1. Download the new version of <%= vars.product_short %> from [<%= vars.product_network %>](https://network.pivotal.io/products/cloud-service-broker-aws/).
1. Follow the procedure in [Installing with AWS](installing-with-aws.html.md.erb) to configure the tile.
